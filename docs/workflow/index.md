# 工作流程

## 架构

```
┌─────────────────────────────────────────────────────────────┐
│                          用户                                │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    Orchestrator (主 Agent)                   │
│                     协调流程 · 管理确认                       │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                        子 Agents                             │
│  PM → [确认] → Architect → [确认] → Developer → Reviewer → Tester │
└─────────────────────────────────────────────────────────────┘
```

## 角色分工

| 角色 | 类型 | 职责 | 文档 |
|------|------|------|------|
| Orchestrator | 主 Agent | 协调流程、调度子 Agent、管理确认 | [orchestrator/](orchestrator/) |
| PM | 子 Agent | 需求 → PRD | [pm/](pm/) |
| Architect | 子 Agent | PRD → 技术方案 | [architect/](architect/) |
| Developer | 子 Agent | 技术方案 → 代码 | [developer/](developer/) |
| Reviewer | 子 Agent | 代码 → 审查报告 | [reviewer/](reviewer/) |
| Tester | 子 Agent | 代码 → 测试报告 | [tester/](tester/) |

## 状态管理

详见 [state/](state/)

```
项目根目录/
└── .cc-agent/
    ├── index.yaml        # 索引 + 当前任务指针
    └── tasks/
        └── xxx.yaml      # 任务详情
```

## 流程状态

```
[需求分析] → [PRD确认] → [技术设计] → [方案确认] → [编码] → [审查] → [测试] → [完成]
     ↑           │            ↑            │          ↑       │        │
     └───────────┘            └────────────┘          └───────┴────────┘
       用户不通过                用户不通过              审查/测试不通过
```

## 确认节点

| 节点 | 时机 | 确认内容 |
|------|------|----------|
| PRD 确认 | PM 输出后 | 功能范围、优先级、验收标准 |
| 技术方案确认 | Architect 输出后 | 技术选型、架构、接口、数据模型 |

## 调度逻辑

详见 [orchestrator/](orchestrator/)

